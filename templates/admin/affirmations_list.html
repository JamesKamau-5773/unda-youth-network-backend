{% extends "base.html" %}

{% block title %}Daily Affirmations - Admin Dashboard{% endblock %}

{% block content %}
<div class="hero-card">
    <div class="hero-card__inner">
        <div>
            <h1 class="hero-card__title">Daily Affirmations</h1>
            <p class="hero-card__subtitle">Manage daily affirmations and motivational messages</p>
        </div>
        <div class="hero-card__actions">
            <a href="{{ url_for('admin.affirmation_form') }}" class="btn btn--success">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                Add New Affirmation
            </a>
            <a href="{{ url_for('admin.workstreams') }}" class="btn btn--secondary">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                Back
            </a>
        </div>
    </div>
</div>

<!-- Filters -->
<div style="background: white; border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
    <form method="GET" style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: flex-end;">
        <div style="flex: 1; min-width: 200px;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #374151;">Theme</label>
            <select name="theme" class="form-input">
                <option value="">All Themes</option>
                {% for theme in themes %}
                <option value="{{ theme }}" {% if theme_filter == theme %}selected{% endif %}>{{ theme }}</option>
                {% endfor %}
            </select>
        </div>
        <div>
            <label style="display: flex; align-items: center; gap: 0.5rem; font-weight: 600; color: #374151;">
                <input type="checkbox" name="active" value="true" {% if active_only %}checked{% endif %} style="width: 18px; height: 18px;">
                Active Only
            </label>
        </div>
        <button type="submit" class="btn btn--primary">Filter</button>
        <a href="{{ url_for('admin.affirmations') }}" class="btn btn--secondary">Reset</a>
    </form>
</div>

<!-- Affirmations List (compact table) -->
{% if affirmations %}
<div class="card" style="padding:1rem;">
    <table class="affirmations-table" style="width:100%; border-collapse:collapse;">
        <thead>
            <tr>
                <th style="text-align:left; padding:0.75rem 1rem; color:var(--text-secondary);">ID</th>
                <th style="text-align:left; padding:0.75rem 1rem; color:var(--text-secondary);">Scheduled</th>
                <th style="text-align:left; padding:0.75rem 1rem; color:var(--text-secondary);">Theme</th>
                <th style="text-align:left; padding:0.75rem 1rem; color:var(--text-secondary);">Content</th>
                <th style="text-align:left; padding:0.75rem 1rem; color:var(--text-secondary);">Active</th>
                <th style="padding:0.75rem 1rem; color:var(--text-secondary);">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for aff in affirmations %}
            <tr>
                <td style="padding:0.5rem 1rem; vertical-align:middle;">{{ aff.affirmation_id }}</td>
                <td style="padding:0.5rem 1rem; vertical-align:middle;">{% if aff.scheduled_date %}{{ aff.scheduled_date.strftime('%Y-%m-%d') }}{% else %}â€”{% endif %}</td>
                <td style="padding:0.5rem 1rem; vertical-align:middle;">{{ aff.theme or 'General' }}</td>
                <td style="padding:0.5rem 1rem; vertical-align:middle; color:var(--text-primary);">{{ aff.content }}</td>
                <td style="padding:0.5rem 1rem; vertical-align:middle;">{{ 'Yes' if aff.active else 'No' }}</td>
                <td style="padding:0.5rem 1rem; vertical-align:middle;">
                    <a href="{{ url_for('admin.affirmation_edit', affirmation_id=aff.affirmation_id) }}" class="btn btn--link">Edit</a>
                    <form method="POST" action="{{ url_for('admin.affirmation_delete', affirmation_id=aff.affirmation_id) }}" style="display:inline-block; margin-left:0.5rem;">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <button type="submit" class="btn btn--link" onclick="return confirm('Deactivate this affirmation?')">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="card" style="padding:2rem; text-align:left;">
    <h3 style="margin:0 0 0.5rem 0; color:var(--text-primary);">No Affirmations</h3>
    <p style="margin:0 0 1rem 0; color:var(--text-secondary);">No affirmations found. Create your first affirmation.</p>
    <a href="{{ url_for('admin.affirmation_form') }}" class="btn btn--success">Create Affirmation</a>
</div>
{% endif %}

{% endblock %}
