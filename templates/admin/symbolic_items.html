{% extends "base.html" %}

{% block title %}Symbolic Items - Admin{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-6 py-8">

  {# Page Header #}
  <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
    <div>
      <h1 class="text-3xl font-black text-[#0B1E3B] tracking-tight">
        Symbolic Items
      </h1>
      <p class="text-[#006064] font-bold text-sm mt-1">
        Manage inventory for branded materials and merchandise.
      </p>
    </div>
    
    {# Primary Action Button - High Contrast #}
    <a href="{{ url_for('admin.create_symbolic_item') }}" 
       class="inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl text-sm font-bold text-white bg-[#00838F] hover:bg-[#006064] shadow-lg shadow-[#00838F]/20 transition-transform hover:-translate-y-0.5">
       <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
       Create Item
    </a>
  </div>

  {# Main Content Card #}
  <div class="bg-white rounded-[2rem] border border-[#D6EAFC] shadow-sm overflow-hidden">
    
    {# List Header - Darker Text for Readability #}
    <div class="hidden md:flex px-8 py-4 bg-[#ECF5FF] border-b border-[#D6EAFC] items-center justify-between gap-4">
       <div class="w-1/2 text-xs font-black text-[#006064] uppercase tracking-wider">Item Details</div>
       <div class="w-1/4 text-xs font-black text-[#006064] uppercase tracking-wider">Availability</div>
       <div class="w-1/4 text-xs font-black text-[#006064] uppercase tracking-wider text-right">Actions</div>
    </div>

    <div class="divide-y divide-[#D6EAFC]">
      {% for i in items %}
      <div class="group flex flex-col md:flex-row md:items-center justify-between p-6 hover:bg-[#ECF5FF] transition-colors duration-200 gap-4">
        
        {# Column 1: Item Info #}
        <div class="md:w-1/2 flex items-center gap-4">
          {# Icon Placeholder #}
          <div class="h-12 w-12 rounded-2xl bg-[#D6EAFC] flex items-center justify-center text-[#00838F] border border-[#D6EAFC]">
             <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
          </div>
          <div>
            {# Item Name - Navy Ink (Max Contrast) #}
            <h3 class="text-lg font-bold text-[#0B1E3B]">{{ i.item_name }}</h3>
            <div class="flex items-center gap-2 mt-1">
                {# Type Badge - Darker Text #}
                <span class="text-[10px] font-bold text-[#006064] bg-[#D6EAFC] px-2 py-0.5 rounded-md uppercase tracking-wide border border-[#D6EAFC]">
                    {{ i.item_type or 'General' }}
                </span>
                <span class="text-[10px] font-bold text-[#00838F] opacity-80">ID: {{ i.item_id }}</span>
            </div>
          </div>
        </div>

        {# Column 2: Availability #}
        <div class="md:w-1/4 flex items-center">
            {% set available = (i.total_quantity - i.distributed_quantity) %}
            <div class="flex items-center gap-3">
                <div class="flex flex-col">
                    <span class="text-2xl font-black text-[#0B1E3B] leading-none">{{ available }}</span>
                    <span class="text-[10px] font-bold text-[#006064] uppercase mt-1">In Stock</span>
                </div>
                
                {# Visual Indicator #}
                <div class="h-2 w-20 bg-[#D6EAFC] rounded-full overflow-hidden border border-[#D6EAFC]">
                    {% set percent = (available / i.total_quantity * 100) if i.total_quantity > 0 else 0 %}
                    <div class="h-full rounded-full {{ 'bg-red-500' if percent < 20 else 'bg-[#00838F]' }}" style="width: {{ percent }}%"></div>
                </div>
            </div>
        </div>

        {# Column 3: Actions #}
        <div class="md:w-1/4 flex items-center justify-end gap-2">
          
           <a href="{{ url_for('admin.edit_symbolic_item', item_id=i.item_id) }}" 
             class="p-2.5 rounded-xl text-[#00838F] bg-white border border-[#D6EAFC] hover:bg-[#00838F] hover:text-white hover:border-[#00838F] transition-all shadow-sm"
             title="Edit Item">
             <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
          </a>

          <form action="{{ url_for('admin.delete_symbolic_item', item_id=i.item_id) }}" method="post" onsubmit="return confirm('Delete this item?');" style="display:inline">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <button class="p-2.5 rounded-xl text-red-500 bg-white border border-red-100 hover:bg-red-500 hover:text-white hover:border-red-500 transition-all shadow-sm" title="Delete">
               <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
            </button>
          </form>

        </div>
      </div>
      {% else %}
        {# Empty State #}
          <div class="p-16 text-center flex flex-col items-center">
            <div class="h-20 w-20 bg-[#ECF5FF] rounded-full flex items-center justify-center mb-4 border border-[#D6EAFC]">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#00838F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="opacity-50"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><line x1="3.27" y1="6.96" x2="12" y2="12.01"></line><line x1="20.73" y1="6.96" x2="12" y2="12.01"></line><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
           </div>
           <h3 class="text-[#0B1E3B] font-bold text-xl">Inventory Empty</h3>
           <p class="text-[#006064] text-sm mt-2 mb-8 font-medium">You haven't added any symbolic items yet.</p>
           <a href="{{ url_for('admin.create_symbolic_item') }}" class="px-8 py-3 rounded-xl text-sm font-bold text-[#006064] bg-[#D6EAFC] hover:bg-[#D6EAFC] transition-colors border border-[#D6EAFC]">
             Create First Item
           </a>
        </div>
      {% endfor %}
    </div>
  </div>

</div>
{% endblock %}