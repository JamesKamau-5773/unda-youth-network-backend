{% extends 'admin/base.html' %}
{% block content %}
<div class="hero-card">
  <div class="hero-card__inner">
    <div>
      <h1 class="hero-card__title">Resources</h1>
      <p class="hero-card__subtitle">Manage resource items available to users.</p>
    </div>
    <div class="hero-card__actions" style="display:flex; gap:0.5rem;">
      <a href="{{ url_for('admin.workstreams') }}" class="btn btn--secondary">‚Üê Back to Workstreams</a>
      <a href="{{ url_for('admin.create_resource') }}" class="btn btn--primary">Create Resource</a>
    </div>
  </div>
</div>

<div class="table-container">
  <div class="table-header">
    <h2 class="section-title">All Resources</h2>
  </div>
  <div class="card">
    <ul>
    {% for r in resources %}
      <li style="padding:0.75rem 0; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid var(--border-color);">
        <div style="display:flex; align-items:center; gap:0.75rem;">
          <span style="display:inline-block; padding:0.2rem 0.5rem; border-radius:4px; font-size:0.7rem; font-weight:700; letter-spacing:0.05em;
            {% if r.published %}background:#d1fae5; color:#065f46;{% else %}background:#fef3c7; color:#92400e;{% endif %}">
            {{ 'Published' if r.published else 'Draft' }}
          </span>
          <div>{{ r.title }}</div>
        </div>
        <div style="display:flex; gap:0.5rem;">
          <form action="{{ url_for('admin.toggle_publish_resource', resource_id=r.resource_id) }}" method="post" style="display:inline">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
            <button class="btn btn--{{ 'warning' if r.published else 'success' }}" style="font-size:0.8rem;">
              {{ 'Unpublish' if r.published else 'Publish' }}
            </button>
          </form>
          <a href="{{ url_for('admin.edit_resource', resource_id=r.resource_id) }}" class="btn btn--secondary">Edit</a>
          <form action="{{ url_for('admin.delete_resource', resource_id=r.resource_id) }}" method="post" style="display:inline">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
            <button class="btn btn--secondary">Delete</button>
          </form>
        </div>
      </li>
    {% endfor %}
    </ul>
  </div>
</div>

{% endblock %}
