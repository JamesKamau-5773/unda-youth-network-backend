{% extends "base.html" %}

{% block title %}{{ action }} UMV Mtaani Event{% endblock %}

{% block content %}
<div class="hero-card">
    <div class="hero-card__inner">
        <div>
            <h1 class="hero-card__title">{{ action }} UMV Mtaani Baraza</h1>
            <p class="hero-card__subtitle">Plan community dialogues and barazas</p>
        </div>
        <div class="hero-card__actions">
            <a href="{{ url_for('admin.umv_mtaani') }}" class="btn btn--secondary">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                Back to Events
            </a>
        </div>
    </div>
</div>

<div style="max-width: 820px; margin: 0 auto;">
    <div class="data-card">
        <div style="padding: 1.5rem; border-bottom: 1px solid var(--border-color); background: linear-gradient(135deg, #1e40af 0%, #1d4ed8 100%);">
            <h3 style="font-size: 1.125rem; font-weight: 600; margin: 0; color: white; display: flex; align-items: center; gap: 0.6rem;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
                </svg>
                Event Details
            </h3>
        </div>
        <div style="padding: 2rem;">
            <form method="POST">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>

                <div class="form-group">
                    <label for="title" class="form-label">Title <span style="color: #ef4444;">*</span></label>
                    <input type="text" id="title" name="title" class="form-input" required value="{{ event.title if event else '' }}" placeholder="Debate theme or motion">
                </div>

                <div class="form-group">
                    <label for="description" class="form-label">Description</label>
                    <textarea id="description" name="description" class="form-input" rows="4" placeholder="What will this session cover?">{{ event.description if event else '' }}</textarea>
                </div>

                <div class="grid grid--2-col" style="gap: 1rem;">
                    <div class="form-group">
                        <label for="event_date" class="form-label">Event Date &amp; Time <span style="color: #ef4444;">*</span></label>
                        <input type="datetime-local" id="event_date" name="event_date" class="form-input" required value="{{ event.event_date.strftime('%Y-%m-%dT%H:%M') if event and event.event_date else '' }}">
                    </div>
                    <div class="form-group">
                        <label for="registration_deadline" class="form-label">Registration Deadline</label>
                        <input type="datetime-local" id="registration_deadline" name="registration_deadline" class="form-input" value="{{ event.registration_deadline.strftime('%Y-%m-%dT%H:%M') if event and event.registration_deadline else '' }}">
                    </div>
                </div>

                <div class="grid grid--2-col" style="gap: 1rem;">
                    <div class="form-group">
                        <label for="location" class="form-label">Location</label>
                        <input type="text" id="location" name="location" class="form-input" value="{{ event.location if event else '' }}" placeholder="Venue or virtual link">
                    </div>
                    <div class="form-group">
                        <label for="organizer" class="form-label">Organizer</label>
                        <input type="text" id="organizer" name="organizer" class="form-input" value="{{ event.organizer if event else '' }}" placeholder="Host name or team">
                    </div>
                </div>

                <div class="grid grid--3-col" style="gap: 1rem;">
                    <div class="form-group">
                        <label for="max_participants" class="form-label">Max Participants</label>
                        <input type="number" id="max_participants" name="max_participants" class="form-input" min="1" value="{{ event.max_participants if event and event.max_participants else '' }}" placeholder="Optional cap">
                    </div>
                    <div class="form-group">
                        <label for="status" class="form-label">Status</label>
                        <select id="status" name="status" class="form-input">
                            {% set status_value = event.status if event else 'Upcoming' %}
                            <option value="Upcoming" {{ 'selected' if status_value == 'Upcoming' else '' }}>Upcoming</option>
                            <option value="Ongoing" {{ 'selected' if status_value == 'Ongoing' else '' }}>Ongoing</option>
                            <option value="Completed" {{ 'selected' if status_value == 'Completed' else '' }}>Completed</option>
                            <option value="Cancelled" {{ 'selected' if status_value == 'Cancelled' else '' }}>Cancelled</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="image_url" class="form-label">Cover Image URL</label>
                        <input type="url" id="image_url" name="image_url" class="form-input" value="{{ event.image_url if event else '' }}" placeholder="Optional hero image">
                    </div>
                </div>

                <div style="margin-top: 2rem; display: flex; gap: 0.75rem;">
                    <button type="submit" class="btn btn--primary" style="flex: 1;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
                            <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"></path>
                            <polyline points="17 21 17 13 7 13 7 21"></polyline>
                            <polyline points="7 3 7 8 15 8"></polyline>
                        </svg>
                        {{ 'Update Event' if event else 'Create Event' }}
                    </button>
                    <a href="{{ url_for('admin.debates') }}" class="btn btn--secondary">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                        Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
